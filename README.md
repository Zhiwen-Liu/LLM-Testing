<div align="center">

  # **LLM-Testing**
  #### å¤§æ¨¡å‹æœåŠ¡åŒ–æ€§èƒ½åŠç²¾åº¦æµ‹è¯•æŒ‡å—
  <!-- ç”¨åˆ†éš”çº¿æ›¿ä»£èƒŒæ™¯ -->
  ---
</div>

## 1 å·¥å…·å®‰è£…
æœ¬é¡¹ç›®ä¸»è¦ä½¿ç”¨AISBenchå·¥å…·è¿›è¡Œå¤§æ¨¡å‹æœåŠ¡åŒ–çš„æ€§èƒ½å’Œç²¾åº¦æµ‹è¯•ï¼Œæ—¨åœ¨å…¨é¢è¯„ä¼°å¤§è¯­è¨€æ¨¡å‹åœ¨ä¸åŒåœºæ™¯ä¸‹çš„è¡¨ç°ï¼Œä¸ºæ¨¡å‹çš„ä¼˜åŒ–å’Œè°ƒå‚æä¾›å¯é çš„æ•°æ®æ”¯æŒã€‚
AISBenchå·¥å…·è¯·å‚ç…§æµ‹è¯•å‰å‡†å¤‡[AISBenchå®‰è£…ä¸å¸è½½](./æµ‹è¯„å‰å‡†å¤‡/AISBenchå®‰è£…ä¸å¸è½½.md)ç« èŠ‚è¿›è¡Œã€‚

## 2 æµ‹è¯„æ•°æ®å‡†å¤‡
AISBench Benchmarkå½“å‰æ”¯æŒçš„æ•°æ®é›†ç±»å‹å¦‚ä¸‹ï¼š
1. å¼€æºæ•°æ®é›†ï¼Œæ¶µç›–é€šç”¨è¯­è¨€ç†è§£ï¼ˆå¦‚ ARCã€SuperGLUE_BoolQã€MMLUï¼‰ã€æ•°å­¦æ¨ç†ï¼ˆå¦‚ GSM8Kã€AIME2024ã€Mathï¼‰ã€ä»£ç ç”Ÿæˆï¼ˆå¦‚ HumanEvalã€MBPPã€LiveCodeBenchï¼‰ã€æ–‡æœ¬æ‘˜è¦ï¼ˆå¦‚ XSumã€LCSTSï¼‰ä»¥åŠå¤šæ¨¡æ€ä»»åŠ¡ï¼ˆå¦‚ TextVQAã€VideoBenchã€VocalSoundï¼‰ç­‰å¤šä¸ªæ–¹å‘ï¼Œæ»¡è¶³å¯¹è¯­è¨€æ¨¡å‹åœ¨å¤šä»»åŠ¡ã€å¤šæ¨¡æ€ã€å¤šè¯­è¨€ç­‰èƒ½åŠ›çš„å…¨é¢è¯„ä¼°éœ€æ±‚ã€‚
2. éšæœºåˆæˆæ•°æ®é›†ï¼Œæ”¯æŒæŒ‡å®šè¾“å…¥è¾“å‡ºåºåˆ—é•¿åº¦å’Œè¯·æ±‚æ•°ç›®ï¼Œé€‚ç”¨äºå¯¹äºåºåˆ—åˆ†å¸ƒåœºæ™¯å’Œæ•°æ®è§„æ¨¡å­˜åœ¨è¦æ±‚çš„æ€§èƒ½æµ‹è¯•åœºæ™¯ã€‚
3. è‡ªå®šä¹‰æ•°æ®é›†ï¼Œæ”¯æŒå°†ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®å†…å®¹è½¬æ¢æˆå›ºå®šæ ¼å¼çš„æ•°æ®è¿›è¡Œæµ‹è¯„ï¼Œé€‚ç”¨äºå®šåˆ¶åŒ–ç²¾åº¦å’Œæ€§èƒ½æµ‹è¯•åœºæ™¯ã€‚
   
ä¾¿äºç”¨æˆ·å¿«é€Ÿè¿›è¡Œæ ‡å‡†åŒ–æµ‹è¯•ï¼Œæ•°æ®é›†çš„è¯¦ç»†ä»‹ç»å’Œè·å–æ–¹å¼è¯·æŸ¥çœ‹ï¼š[AISBenchæ•°æ®é›†å‡†å¤‡æŒ‡å—](https://gitee.com/aisbench/benchmark/blob/master/doc/users_guide/datasets.md)ï¼Œè¯·æŒ‰ç…§æŒ‡å—ä¸­çš„æ­¥éª¤è¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œç²¾åº¦æµ‹è¯•æ•°æ®é›†çš„å‡†å¤‡ã€‚

## 3 å¤§æ¨¡å‹æœåŠ¡åŒ–æµ‹è¯„
### 3.1 æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„
MindIEæ¨ç†å¼•æ“å¯åŠ¨çš„å¤§æ¨¡å‹æœåŠ¡æ”¯æŒvllmå…¼å®¹OpenAIæ¥å£ï¼Œå› æ­¤ä»¥ä¸‹æµ‹è¯„æ­¥éª¤ä»¥**MindIEæ¨ç†å¼•æ“**å¤§æ¨¡å‹æœåŠ¡åŒ–æ¨¡å‹æ€§èƒ½æµ‹è¯„ä¸ºä¾‹ï¼Œä½¿ç”¨vllmæµå¼å¯¹è¯ä»»åŠ¡ï¼švllm_api_stream_chatã€‚
- åŠŸèƒ½æè¿°ï¼šåœ¨çœŸå®éƒ¨ç½²ç¯å¢ƒä¸­è¯„ä¼°æœåŠ¡æ¨¡å‹çš„è¿è¡Œæ•ˆç‡ï¼ˆååã€å»¶è¿Ÿï¼‰ï¼›
- è¦æ±‚ï¼šæ¨¡å‹æ¨ç†æœåŠ¡å·²ä½¿ç”¨MindIEéƒ¨ç½²ä¸”éœ€æ”¯æŒ**æµå¼æ¥å£**æ–¹å¼è®¿é—®ï¼›
- æ³¨æ„ï¼šæ€§èƒ½æµ‹è¯„æ‰€å ç”¨çš„ç¼“å­˜å¤§å°ä¸è¯·æ±‚çš„ä¸Šä¸‹æ–‡é•¿åº¦ä»¥åŠè¯·æ±‚çš„æ•°é‡æˆæ­£æ¯”ï¼Œå› æ­¤é€šå¸¸ä¸æµ‹è¯„æ—¶é•¿å‘ˆæ­£ç›¸å…³å¢é•¿ã€‚

**3.1.1 è¿è¡Œå‘½ä»¤å‰ç½®å‡†å¤‡**

- ä½¿ç”¨MindIEæ¨ç†å¼•æ“éƒ¨ç½²å¤§æ¨¡å‹æœåŠ¡ï¼›
- å‡†å¤‡æ€§èƒ½æµ‹è¯„æ•°æ®é›†ï¼Œä»¥gsm8kæ•°æ®é›†ä¸ºä¾‹ï¼Œå¯ä»¥ä¸‹è½½ [opencompass
æä¾›çš„gsm8kæ•°æ®é›†å‹ç¼©åŒ…](http://opencompass.oss-cn-shanghai.aliyuncs.com/datasets/data/gsm8k.zip)ã€‚å°†è§£å‹åçš„`gsm8k/`æ–‡ä»¶å¤¹éƒ¨ç½²åˆ°AISBenchè¯„æµ‹å·¥å…·æ ¹è·¯å¾„ä¸‹çš„`ais_bench/datasets`æ–‡ä»¶å¤¹ä¸‹ã€‚

**3.1.2 ä¿®æ”¹é…ç½®æ–‡ä»¶**

æ¯ä¸ªæ¨¡å‹æµ‹è¯„ä»»åŠ¡ã€æ•°æ®é›†ä»»åŠ¡å’Œç»“æœå‘ˆç°ä»»åŠ¡éƒ½å¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œå‘½ä»¤å‰éœ€è¦ä¿®æ”¹è¿™äº›é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚è¿™äº›é…ç½®æ–‡ä»¶è·¯å¾„å¯ä»¥é€šè¿‡åœ¨åŸæœ‰AISBenchå‘½ä»¤åŸºç¡€ä¸ŠåŠ ä¸Š`--search`æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š
```shell
# æ³¨æ„searchçš„å‘½ä»¤ä¸­æ˜¯å¦åŠ  "--mode perf" ä¸å½±å“æœç´¢ç»“æœ
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --mode perf --search
```
> âš ï¸ **æ³¨æ„**ï¼š æ‰§è¡Œå¸¦searchå‘½ä»¤ä¼šæ‰“å°å‡ºä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

æ‰§è¡ŒæŸ¥è¯¢å‘½ä»¤å¯ä»¥å¾—åˆ°å¦‚ä¸‹æŸ¥è¯¢ç»“æœï¼š
```shell
06/28 11:52:25 - AISBench - INFO - Searching configs...
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type    â”‚ Task Name                             â”‚ Config File Path                                                                                                               â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --models     â”‚ vllm_api_stream_chat                  â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/models/vllm_api/vllm_api_general_chat.py                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets   â”‚ demo_gsm8k_gen_4_shot_cot_chat_prompt â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/datasets/demo/demo_gsm8k_gen_4_shot_cot_chat_prompt.py                   â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

```

æ¨¡å‹é…ç½®æ–‡ä»¶`vllm_api_stream_chat.py`ä¸­åŒ…å«äº†æ¨¡å‹è¿è¡Œç›¸å…³çš„é…ç½®å†…å®¹ï¼Œæ˜¯éœ€è¦ä¾æ®å®é™…æƒ…å†µä¿®æ”¹çš„ã€‚**æ­¤é¡¹ç›®ç¤ºä¾‹æµ‹è¯„ä»»åŠ¡éœ€è¦ä¿®æ”¹çš„å†…å®¹å·²ç”¨æ³¨é‡Šæ ‡æ˜ã€‚**
```python
from ais_bench.benchmark.models import VLLMCustomAPIChatStream

models = [
    dict(
        attr="service",
        type=VLLMCustomAPIChatStream,
        abbr='vllm-api-stream-chat',
        path="",                    # æŒ‡å®šæ¨¡å‹åºåˆ—åŒ–è¯è¡¨æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯æ¨¡å‹æƒé‡æ–‡ä»¶å¤¹è·¯å¾„
        model="DeepSeek-R1",        # æŒ‡å®šæœåŠ¡ç«¯å·²åŠ è½½æ¨¡å‹åç§°ï¼Œä¾æ®å®é™…MindIEæ¨ç†æœåŠ¡æ‹‰å–çš„æ¨¡å‹åç§°é…ç½®ï¼ˆé…ç½®æˆç©ºå­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è·å–ï¼‰
        request_rate = 0,           # è¯·æ±‚å‘é€é¢‘ç‡ï¼Œæ¯1/request_rateç§’å‘é€1ä¸ªè¯·æ±‚ç»™æœåŠ¡ç«¯ï¼Œå°äº0.1åˆ™ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰è¯·æ±‚
        retry = 2,
        host_ip = "localhost",      # æŒ‡å®šæ¨ç†æœåŠ¡çš„IP
        host_port = 8080,           # æŒ‡å®šæ¨ç†æœåŠ¡çš„ç«¯å£
        max_out_len = 512,          # æ¨ç†æœåŠ¡è¾“å‡ºçš„tokençš„æœ€å¤§æ•°é‡
        batch_size=1,               # è¯·æ±‚å‘é€çš„æœ€å¤§å¹¶å‘æ•°
        generation_kwargs = dict(
            temperature = 0.5,
            top_k = 10,
            top_p = 0.95,
            seed = None,
            repetition_penalty = 1.03,
            ignore_eos = True,      # æ¨ç†æœåŠ¡è¾“å‡ºå¿½ç•¥eosï¼ˆè¾“å‡ºé•¿åº¦ä¸€å®šä¼šè¾¾åˆ°max_out_lenï¼‰
        )
    )
]
```
æ­¤é¡¹ç›®æµ‹è¯„ç¤ºä¾‹çš„æ•°æ®é›†ä»»åŠ¡é…ç½®æ–‡ä»¶`demo_gsm8k_gen_4_shot_cot_chat_prompt.py`å·²é»˜è®¤é…ç½®å¥½ï¼Œä¸éœ€è¦åšé¢å¤–ä¿®æ”¹ã€‚

**3.1.3 æ‰§è¡ŒæœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å‘½ä»¤**

ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶åï¼Œæ‰§è¡Œå‘½ä»¤å¯åŠ¨æœåŠ¡åŒ–æ€§èƒ½è¯„æµ‹ï¼ˆâš ï¸ ç¬¬ä¸€æ¬¡æ‰§è¡Œå»ºè®®åŠ ä¸Š`--debug`ï¼Œå¯ä»¥å°†å…·ä½“æ—¥å¿—æ‰“å±ï¼Œå¦‚æœæœ‰è¯·æ±‚æ¨ç†æœåŠ¡è¿‡ç¨‹ä¸­çš„æŠ¥é”™æ›´æ–¹ä¾¿å¤„ç†ï¼‰ï¼š
```bash
# å‘½ä»¤è¡ŒåŠ ä¸Š--debug
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt -m perf --debug
```
å…¶ä¸­ï¼š
- `--models`æŒ‡å®šäº†æ¨¡å‹ä»»åŠ¡ï¼Œå³`vllm_api_stream_chat`æ¨¡å‹ä»»åŠ¡ã€‚

- `--datasets`æŒ‡å®šäº†æ•°æ®é›†ä»»åŠ¡ï¼Œå³`demo_gsm8k_gen_4_shot_cot_chat_prompt`æ•°æ®é›†ä»»åŠ¡ã€‚

- `-m`æŒ‡å®šäº†è¯„æµ‹åœºæ™¯ï¼Œå³`perf`æ€§èƒ½è¯„æµ‹åœºæ™¯ã€‚

- `--summarizer`æŒ‡å®šäº†ç»“æœå‘ˆç°ä»»åŠ¡ï¼Œå³`default_perf`ç»“æœå‘ˆç°ä»»åŠ¡(ä¸æŒ‡å®š`--summarizer`ç²¾åº¦è¯„æµ‹åœºæ™¯é»˜è®¤ä½¿ç”¨`default_perf`ä»»åŠ¡)ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤ï¼Œä¸éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œåç»­å‘½ä»¤ä¸æŒ‡å®šã€‚

**3.1.4 æŸ¥çœ‹æ€§èƒ½ç»“æœ**

æ€§èƒ½ç»“æœæ‰“å±ç¤ºä¾‹å¦‚ä¸‹ï¼š
```bash
06/05 20:22:24 - AISBench - INFO - Performance Results of task: vllm-api-stream-chat/gsm8kdataset:

â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average          â”‚ Min              â”‚ Max              â”‚ Median           â”‚ P75              â”‚ P90              â”‚ P99              â”‚  N   â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2048.2945  ms    â”‚ 1729.7498 ms     â”‚ 3450.96 ms       â”‚ 2491.8789 ms     â”‚ 2750.85 ms       â”‚ 3184.9186 ms     â”‚ 3424.4354 ms     â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ TTFT                     â”‚ total   â”‚ 50.332 ms        â”‚ 50.6244 ms       â”‚ 52.0585 ms       â”‚ 50.3237 ms       â”‚ 50.5872 ms       â”‚ 50.7566 ms       â”‚ 50 .0551 ms      â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ TPOT                     â”‚ total   â”‚ 10.6965 ms       â”‚ 10.061 ms        â”‚ 10.8805 ms       â”‚ 10.7495 ms       â”‚ 10.7818 ms       â”‚ 10.808 ms        â”‚ 10.8582 ms       â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ ITL                      â”‚ total   â”‚ 10.6965 ms       â”‚ 7.3583 ms        â”‚ 13.7707 ms       â”‚ 10.7513 ms       â”‚ 10.8009 ms       â”‚ 10.8358 ms       â”‚ 10.9322 ms       â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ InputTokens              â”‚ total   â”‚ 1512.5           â”‚ 1481.0           â”‚ 1566.0           â”‚ 1511.5           â”‚ 1520.25          â”‚ 1536.6           â”‚ 1563.06          â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ OutputTokens             â”‚ total   â”‚ 287.375          â”‚ 200.0            â”‚ 407.0            â”‚ 280.0            â”‚ 322.75           â”‚ 374.8            â”‚ 403.78           â”‚ 8    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ OutputTokenThroughput    â”‚ total   â”‚ 115.9216 token/s â”‚ 107.6555 token/s â”‚ 116.5352 token/s â”‚ 117.6448 token/s â”‚ 118.2426 token/s â”‚ 118.3765 token/s â”‚ 118.6388 token/s â”‚ 8    â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•›
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value              â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 19897.8505 ms      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Requests           â”‚ total   â”‚ 8                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Failed Requests          â”‚ total   â”‚ 0                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Success Requests         â”‚ total   â”‚ 8                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Concurrency              â”‚ total   â”‚ 0.9972             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Max Concurrency          â”‚ total   â”‚ 1                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Request Throughput       â”‚ total   â”‚ 0.4021 req/s       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Input Tokens       â”‚ total   â”‚ 12100              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prefill Token Throughput â”‚ total   â”‚ 17014.3123 token/s â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total generated tokens   â”‚ total   â”‚ 2299               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input Token Throughput   â”‚ total   â”‚ 608.7438 token/s   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output Token Throughput  â”‚ total   â”‚ 115.7835 token/s   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Token Throughput   â”‚ total   â”‚ 723.5273 token/s   â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

06/05 20:22:24 - AISBench - INFO - Performance Result files locate in outputs/default/20250605_202220/performances/vllm-api-stream-chat.

```

**ğŸ’¡ å…·ä½“æ€§èƒ½å‚æ•°çš„å«ä¹‰è¯·å‚è€ƒä¸‹è¡¨**
|Performance Parameters|Stage|Average|Max|Min|Median|P75|P90|P99|N|
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|E2EL|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|å¹³å‡è¯·æ±‚æ—¶å»¶|æœ€å¤§è¯·æ±‚æ—¶å»¶|æœ€å°è¯·æ±‚æ—¶å»¶|è¯·æ±‚æ—¶å»¶ä¸­ä½æ•°|è¯·æ±‚æ—¶å»¶75åˆ†ä½å€¼|è¯·æ±‚æ—¶å»¶90åˆ†ä½å€¼|è¯·æ±‚æ—¶å»¶99åˆ†ä½å€¼|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|TTFT|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|é¦–ä¸ªtokenå¹³å‡æ—¶å»¶|é¦–ä¸ªtokenæœ€å¤§æ—¶å»¶|é¦–ä¸ªtokenæœ€å°æ—¶å»¶|é¦–ä¸ªtokenä¸­ä½æ•°æ—¶å»¶|é¦–ä¸ªtoken75åˆ†ä½æ—¶å»¶|é¦–ä¸ªtoken90åˆ†ä½æ—¶å»¶|é¦–ä¸ªtoken99åˆ†ä½æ—¶å»¶|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|TPOT|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|Decodeé˜¶æ®µå¹³å‡æ—¶å»¶|æœ€å¤§Decodeé˜¶æ®µæ—¶å»¶|æœ€å°Decodeé˜¶æ®µæ—¶å»¶|Decodeé˜¶æ®µä¸­ä½æ•°æ—¶å»¶|75åˆ†ä½Decodeé˜¶æ®µæ—¶å»¶|90åˆ†ä½æ¯æ¡è¯·æ±‚Decodeé˜¶æ®µå¹³å‡æ—¶å»¶|99åˆ†ä½Decodeé˜¶æ®µæ—¶å»¶|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|ITL|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|tokené—´å¹³å‡æ—¶å»¶|tokené—´æœ€å¤§æ—¶å»¶|tokené—´æœ€å°æ—¶å»¶|tokené—´ä¸­ä½æ•°æ—¶å»¶|tokené—´75åˆ†ä½æ—¶å»¶|tokené—´90åˆ†ä½æ—¶å»¶|tokené—´99åˆ†ä½æ—¶å»¶|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|InputTokens|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|è¾“å…¥tokenå¹³å‡é•¿åº¦|æœ€å¤§è¾“å…¥tokené•¿åº¦|æœ€å°è¾“å…¥tokené•¿åº¦|è¾“å…¥tokenä¸­ä½æ•°é•¿åº¦|75åˆ†ä½è¾“å…¥tokené•¿åº¦|90åˆ†ä½è¾“å…¥tokené•¿åº¦|99åˆ†ä½è¾“å…¥tokené•¿åº¦|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|OutputTokens|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|è¾“å‡ºtokenå¹³å‡é•¿åº¦|æœ€å¤§è¾“å‡ºtokené•¿åº¦|æœ€å°è¾“å‡ºtokené•¿åº¦|è¾“å‡ºtokenä¸­ä½æ•°é•¿åº¦|75åˆ†ä½è¾“å‡ºtokené•¿åº¦|90åˆ†ä½è¾“å‡ºtokené•¿åº¦|99åˆ†ä½è¾“å‡ºtokené•¿åº¦|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|
|OutputTokenThroughput|ç»Ÿè®¡æ­¤å‚æ•°çš„é˜¶æ®µ|å¹³å‡è¾“å‡ºåå|æœ€å¤§è¾“å‡ºåå|æœ€å°è¾“å‡ºåå|ä¸­ä½æ•°è¾“å‡ºåå|è¾“å‡ºåå75åˆ†ä½|è¾“å‡ºåå90åˆ†ä½|è¾“å‡ºåå99åˆ†ä½|æµ‹è¯•æ•°æ®é‡ï¼Œæ¥æºäºè¾“å…¥å‚æ•°|

| å‚æ•°                           | è¯´æ˜                    |
| ---------------------------- | ---------------------  |
| **Benchmark Duration**       | æµ‹è¯•ä»»åŠ¡çš„æ€»æ‰§è¡Œæ—¶é—´            |
| **Total Requests**           | è¯·æ±‚æ€»æ•°é‡                 |
| **Failed Requests**          | è¯·æ±‚å¤±è´¥æ•°é‡ï¼ˆåŒ…å«æ— å“åº”æˆ–å“åº”ä¸ºç©ºï¼‰    |
| **Success Requests**         | æˆåŠŸè¿”å›çš„è¯·æ±‚æ•°é‡ï¼ˆåŒ…æ‹¬ç©ºå“åº”ä¸éç©ºå“åº”ï¼‰ |
| **Concurrency**              | å®é™…å¹³å‡å¹¶å‘æ•°               |
| **Max Concurrency**          | é…ç½®çš„æœ€å¤§å¹¶å‘æ•°              |
| **Request Throughput**       | è¯·æ±‚çº§ååç‡ï¼ˆè¯·æ±‚æ•°/ç§’ï¼‰         |
| **Total Input Tokens**       | æ‰€æœ‰è¯·æ±‚çš„æ€»è¾“å…¥ Token æ•°      |
| **Prefill Token Throughput** | Prefill é˜¶æ®µçš„ Token ååç‡ |
| **Total Output Tokens**      | æ‰€æœ‰è¯·æ±‚ç”Ÿæˆçš„æ€»è¾“å‡º Token æ•°    |
| **Input Token Throughput**   | è¾“å…¥ Token ååç‡          |
| **Output Token Throughput**  | è¾“å‡º Token ååç‡          |
| **Total Token Throughput**   | æ€» Token ååç‡ï¼ˆè¾“å…¥ + è¾“å‡ºï¼‰  |

### 3.2 æœåŠ¡åŒ–ç²¾åº¦æµ‹è¯„
MindIEæ¨ç†å¼•æ“å¯åŠ¨çš„å¤§æ¨¡å‹æœåŠ¡æ”¯æŒvllmå…¼å®¹OpenAIæ¥å£ï¼Œå› æ­¤ä»¥ä¸‹æµ‹è¯„æ­¥éª¤ä»¥**MindIEæ¨ç†å¼•æ“**å¤§æ¨¡å‹æœåŠ¡åŒ–æ¨¡å‹ç²¾åº¦æµ‹è¯„ä¸ºä¾‹ï¼Œä½¿ç”¨vllmæµå¼å¯¹è¯ä»»åŠ¡ï¼švllm_api_stream_chatã€‚
- åŠŸèƒ½æè¿°ï¼šè¯„ä¼°éƒ¨ç½²ä¸ºæœåŠ¡å½¢å¼çš„æ¨¡å‹åœ¨ç‰¹å®šæ•°æ®é›†ä¸Šçš„é¢„æµ‹å‡†ç¡®ç‡;
- è¦æ±‚ï¼šæ¨¡å‹æ¨ç†æœåŠ¡å·²ä½¿ç”¨MindIEéƒ¨ç½²ï¼Œéœ€æµ‹è¯•å…¶å®é™…æœåŠ¡èƒ½åŠ›;
  
**3.2.1 è¿è¡Œå‘½ä»¤å‰ç½®å‡†å¤‡**

- ä½¿ç”¨MindIEæ¨ç†å¼•æ“éƒ¨ç½²å¤§æ¨¡å‹æœåŠ¡ï¼›
- å‡†å¤‡ç²¾åº¦æµ‹è¯„æ•°æ®é›†ï¼Œä»¥gsm8kæ•°æ®é›†ä¸ºä¾‹ï¼Œå¯ä»¥ä¸‹è½½ [opencompass
æä¾›çš„gsm8kæ•°æ®é›†å‹ç¼©åŒ…](http://opencompass.oss-cn-shanghai.aliyuncs.com/datasets/data/gsm8k.zip)ã€‚å°†è§£å‹åçš„`gsm8k/`æ–‡ä»¶å¤¹éƒ¨ç½²åˆ°AISBenchè¯„æµ‹å·¥å…·æ ¹è·¯å¾„ä¸‹çš„`ais_bench/datasets`æ–‡ä»¶å¤¹ä¸‹ã€‚

**3.2.2 ä¿®æ”¹é…ç½®æ–‡ä»¶**

æ¯ä¸ªæ¨¡å‹æµ‹è¯„ä»»åŠ¡ã€æ•°æ®é›†ä»»åŠ¡å’Œç»“æœå‘ˆç°ä»»åŠ¡éƒ½å¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œå‘½ä»¤å‰éœ€è¦ä¿®æ”¹è¿™äº›é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚è¿™äº›é…ç½®æ–‡ä»¶è·¯å¾„å¯ä»¥é€šè¿‡åœ¨åŸæœ‰AISBenchå‘½ä»¤åŸºç¡€ä¸ŠåŠ ä¸Š`--search`æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š
```shell
# æ³¨æ„searchçš„å‘½ä»¤ä¸­æ˜¯å¦åŠ  "--mode all" ä¸å½±å“æœç´¢ç»“æœ
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --mode all --search
```
> âš ï¸ **æ³¨æ„**ï¼š æ‰§è¡Œå¸¦searchå‘½ä»¤ä¼šæ‰“å°å‡ºä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

æ‰§è¡ŒæŸ¥è¯¢å‘½ä»¤å¯ä»¥å¾—åˆ°å¦‚ä¸‹æŸ¥è¯¢ç»“æœï¼š
```shell
06/28 11:52:25 - AISBench - INFO - Searching configs...
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type    â”‚ Task Name                             â”‚ Config File Path                                                                                                               â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --models     â”‚ vllm_api_stream_chat                  â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/models/vllm_api/vllm_api_general_chat.py                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets   â”‚ demo_gsm8k_gen_4_shot_cot_chat_prompt â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/datasets/demo/demo_gsm8k_gen_4_shot_cot_chat_prompt.py                   â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

```

æ¨¡å‹é…ç½®æ–‡ä»¶`vllm_api_stream_chat.py`ä¸­åŒ…å«äº†æ¨¡å‹è¿è¡Œç›¸å…³çš„é…ç½®å†…å®¹ï¼Œæ˜¯éœ€è¦ä¾æ®å®é™…æƒ…å†µä¿®æ”¹çš„ã€‚**æ­¤é¡¹ç›®ç¤ºä¾‹æµ‹è¯„ä»»åŠ¡éœ€è¦ä¿®æ”¹çš„å†…å®¹å·²ç”¨æ³¨é‡Šæ ‡æ˜ã€‚**
```python
from ais_bench.benchmark.models import VLLMCustomAPIChat

models = [
    dict(
        attr="service",
        type=VLLMCustomAPIChat,
        abbr='vllm-api-general-chat',
        path="",
        model="DeepSeek-R1",        # æŒ‡å®šæœåŠ¡ç«¯å·²åŠ è½½æ¨¡å‹åç§°ï¼Œä¾æ®å®é™…MindIEæ¨ç†æœåŠ¡æ‹‰å–çš„æ¨¡å‹åç§°é…ç½®ï¼ˆé…ç½®æˆç©ºå­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è·å–ï¼‰
        request_rate = 0,
        retry = 2,
        host_ip = "localhost",      # æŒ‡å®šæ¨ç†æœåŠ¡çš„IP
        host_port = 8080,           # æŒ‡å®šæ¨ç†æœåŠ¡çš„ç«¯å£
        max_out_len = 512,
        batch_size=1,
        generation_kwargs = dict(
            temperature = 0.5,
            top_k = 10,
            top_p = 0.95,
            seed = None,
            repetition_penalty = 1.03,
        )
    )
]
```
æ­¤é¡¹ç›®æµ‹è¯„ç¤ºä¾‹çš„æ•°æ®é›†ä»»åŠ¡é…ç½®æ–‡ä»¶`demo_gsm8k_gen_4_shot_cot_chat_prompt.py`å·²é»˜è®¤é…ç½®å¥½ï¼Œä¸éœ€è¦åšé¢å¤–ä¿®æ”¹ã€‚

**3.2.3 æ‰§è¡ŒæœåŠ¡åŒ–ç²¾åº¦æµ‹è¯„å‘½ä»¤**

ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶åï¼Œæ‰§è¡Œå‘½ä»¤å¯åŠ¨æœåŠ¡åŒ–ç²¾åº¦è¯„æµ‹ï¼ˆâš ï¸ ç¬¬ä¸€æ¬¡æ‰§è¡Œå»ºè®®åŠ ä¸Š`--debug`ï¼Œå¯ä»¥å°†å…·ä½“æ—¥å¿—æ‰“å±ï¼Œå¦‚æœæœ‰è¯·æ±‚æ¨ç†æœåŠ¡è¿‡ç¨‹ä¸­çš„æŠ¥é”™æ›´æ–¹ä¾¿å¤„ç†ï¼‰ï¼š
```bash
# å‘½ä»¤è¡ŒåŠ ä¸Š--debug
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt -m all --debug
```
å…¶ä¸­ï¼š
- `--models`æŒ‡å®šäº†æ¨¡å‹ä»»åŠ¡ï¼Œå³`vllm_api_stream_chat`æ¨¡å‹ä»»åŠ¡ã€‚

- `--datasets`æŒ‡å®šäº†æ•°æ®é›†ä»»åŠ¡ï¼Œå³`demo_gsm8k_gen_4_shot_cot_chat_prompt`æ•°æ®é›†ä»»åŠ¡ã€‚

- `-m`æŒ‡å®šäº†è¯„æµ‹åœºæ™¯ï¼Œå³`all`ç²¾åº¦è¯„æµ‹åœºæ™¯ã€‚

- `--summarizer`æŒ‡å®šäº†ç»“æœå‘ˆç°ä»»åŠ¡ï¼Œå³`default_perf`ç»“æœå‘ˆç°ä»»åŠ¡(ä¸æŒ‡å®š`--summarizer`ç²¾åº¦è¯„æµ‹åœºæ™¯é»˜è®¤ä½¿ç”¨`default_perf`ä»»åŠ¡)ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤ï¼Œä¸éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œåç»­å‘½ä»¤ä¸æŒ‡å®šã€‚

**3.2.4 æŸ¥çœ‹ç²¾åº¦ç»“æœ**

å› ä¸ºåªæœ‰8æ¡æ•°æ®ï¼Œä¼šå¾ˆå¿«è·‘å‡ºç»“æœï¼Œç»“æœæ˜¾ç¤ºçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š
```bash
dataset                 version  metric   mode  vllm_api_general_chat
----------------------- -------- -------- ----- ----------------------
demo_gsm8k              401e4c   accuracy gen                   62.50
```
-  `metric`è¡¨ç¤ºæµ‹è¯„æŒ‡æ ‡ï¼Œ`accuracy`æŒ‡é‡‡ç”¨æ­£ç¡®ç‡è¿›è¡Œç²¾åº¦è®¡ç®—ã€‚
-  `mode`è¡¨ç¤ºæµ‹è¯„æ¨¡å¼ï¼Œ`gen`æŒ‡ç”Ÿæˆæ¨¡å¼ã€‚
-  `vllm_api_general_chat`è¡¨ç¤ºæ¨¡å‹æµ‹è¯„ä»»åŠ¡åç§°ï¼Œ`62.50`è¡¨ç¤ºåœ¨`vllm_api_stream_chat`æ¨¡å‹æµ‹è¯„ä»»åŠ¡ä¸‹ï¼Œè¯¥æ•°æ®é›†ä¸Šçš„æ­£ç¡®ç‡ã€‚